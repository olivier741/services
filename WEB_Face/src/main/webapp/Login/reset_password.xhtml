<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml"
       xmlns:h="http://java.sun.com/jsf/html"
       xmlns:p="http://primefaces.org/ui"
       xmlns:f="http://java.sun.com/jsf/core"
       xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>Reset Password</title>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <!--===============================================================================================-->	
        <link rel="icon" type="image/png" href="#{request.contextPath}/Login/images/icons/favicon.ico"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/vendor/bootstrap/css/bootstrap.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/fonts/font-awesome-4.7.0/css/font-awesome.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/fonts/Linearicons-Free-v1.0.0/icon-font.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/fonts/iconic/css/material-design-iconic-font.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/vendor/animate/animate.css"/>
        <!--===============================================================================================-->	
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/vendor/css-hamburgers/hamburgers.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/vendor/animsition/css/animsition.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/vendor/select2/select2.min.css"/>
        <!--===============================================================================================-->	
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/vendor/daterangepicker/daterangepicker.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/css/util.css"/>
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/Login/css/main.css"/>
        <!--===============================================================================================-->
    </h:head>
    <h:body style="background-color: #999999;">

        <div class="limiter">
            <div class="container-login100">
                <div class="login100-more" style="background-image: url('#{request.contextPath}/Login/images/bg-01.jpg');"></div>

                <div class="wrap-login100 p-l-50 p-r-50 p-t-72 p-b-50">
                    <h:form>
                        <p class="login-box-msg">Reset Password of <b>user: #{logonMB.currentUser} </b></p>
                        <p:messages closable="true" />

                        <div class="form-group has-feedback">
                            <p:outputLabel for="email" value="Login"/>
                            <p:inputText id="email" value="#{logonMB.currentUser}" readonly="true" type="email" styleClass="form-control"  />
                            <h:messages id="msgPassword" for="email" styleClass="message" />
                            <i class="fa fa-envelope form-control-feedback" ></i>
                        </div>
                        
                        <p:spacer height="30px;"/>
                        
                        <div class="form-group has-feedback">
                            <p:outputLabel for="current_password" value="Current Password"/>
                            <p:inputText id="current_password" value="#{resetPassword.current_password}" type="password" styleClass="form-control"
                                         placeholder="Old Password" required="true"
                                         validator="#{resetPassword.validateCurPass}"
                                         requiredMessage="Current Password is required.">
                                <f:attribute name="username" value="#{logonMB.currentUser}" />
                            </p:inputText>
                            <i class="fa fa-lock form-control-feedback" style="font-size: 18px"></i>
                        </div>
                        
                        <p:spacer height="30px;"/>

                        <div class="form-group has-feedback">
                            <p:outputLabel for="changed_password" value="New Password"/>
                            <p:inputText id="changed_password" value="#{resetPassword.changed_password}" type="password" styleClass="form-control"
                                         placeholder="New Password" required="true"
                                         binding="#{resetPassword.changed_UIpassword}"
                                         requiredMessage="New Password is required. Min length is 8 and Max length is 32">
                            </p:inputText>
                            <i class="fa fa-lock form-control-feedback" style="font-size: 18px"></i>
                        </div>
                        
                        <p:spacer height="30px;"/>

                        <div class="form-group has-feedback">
                            <p:outputLabel for="conf_password" value="Confirmation Password"/>
                            <p:inputText id ="conf_password" value="#{resetPassword.conf_password}" type="password" styleClass="form-control"
                                         placeholder="Confirmation Password" required="true"
                                         validator="#{resetPassword.validateNewPass}"
                                         requiredMessage="Confirmation Password is required. Min length is 8 and Max length is 32">
                            </p:inputText>
                            <i class="fa fa-lock form-control-feedback" style="font-size: 18px"></i>
                        </div>
                        
                        <p:spacer height="30px;"/>

                        <div class="row">
                            <p:spacer height="10"/>
                            <div class="col-xs-12">
                                <p:commandButton styleClass="btn btn-success btn-block" action="#{resetPassword.reset_login(logonMB.currentUser)}" onclick="showBar()" oncomplete="if(args.validationFailed){hideBar()}"
                                                 value="CHANGE PASSWORD" update="@form"/>
                            </div>
                        </div>    
                    </h:form>
                </div>
            </div>
        </div>

        <!--===============================================================================================-->
        <script src="#{request.contextPath}/Login/vendor/jquery/jquery-3.2.1.min.js"></script>
        <!--===============================================================================================-->
        <script src="#{request.contextPath}/Login/vendor/animsition/js/animsition.min.js"></script>
        <!--===============================================================================================-->
        <script src="#{request.contextPath}/Login/vendor/bootstrap/js/popper.js"></script>
        <script src="#{request.contextPath}/Login/vendor/bootstrap/js/bootstrap.min.js"></script>
        <!--===============================================================================================-->
        <script src="#{request.contextPath}/Login/vendor/select2/select2.min.js"></script>
        <!--===============================================================================================-->
        <script src="#{request.contextPath}/Login/vendor/daterangepicker/moment.min.js"></script>
        <script src="#{request.contextPath}/Login/vendor/daterangepicker/daterangepicker.js"></script>
        <!--===============================================================================================-->
        <script src="#{request.contextPath}/Login/vendor/countdowntime/countdowntime.js"></script>
        <!--===============================================================================================-->
        <script src="#{request.contextPath}/Login/js/main.js"></script>
    </h:body>
</html>

