<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template = "../../template/template.xhtml">



        <ui:define name="body">

            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                <!-- Content Header (Page header) -->
                <section class="content-header">
                    <h1>
                        PASSWORD MANAGEMENT
                        <small>Change Password of current User</small>
                    </h1>
                    <ol class="breadcrumb">
                        <li><a href="#{request.contextPath}/web_site/index.xhtml"><i class="fa fa-dashboard"></i> Home</a></li>
                    </ol>
                </section>

                <!-- Main content -->
                <section class="content">
                    <div class="row">
                        <div class="col-xs-12">

                            <div class="box">

                                <!-- /.box-header -->
                                <div class="box-body">

                                    <p:panel styleClass="card box-info" >

                                        <h:form>

                                            <p:panelGrid columns="3" columnClasses="ui-grid-col-2,ui-grid-col-2, ui-grid-col-4" layout="grid">

                                                <p:outputLabel for="curPassword" value="Current Password"/>
                                                <p:password value="#{userMB.curPass}" required ="true"
                                                            requiredMessage="Your must enter your current password."
                                                            validatorMessage="Incorrect password."
                                                            validator="#{userMB.validateCurPass}"
                                                            id="curPassword">
                                                    <f:attribute name="login" value="#{logonMB.currentUser}" />
                                                </p:password>

                                                <p:message id="msgPassword" for="curPassword"/>


                                                <p:outputLabel for="newPassword1" value="New Password"/>
                                                <p:password  value="#{userMB.newPass1}" required ="true"
                                                             binding="#{userMB.newPass1UI}"
                                                             requiredMessage="Your must enter a new password."
                                                             validatorMessage="New passwords do not match."
                                                             id="newPassword1"/>
                                                <p:message id="msgPassword1" for="newPassword1"/>

                                                <p:outputLabel for="newPassword2" value="Confirm New Password"/>
                                                <p:password value="#{userMB.newPass2}" required ="true"
                                                            requiredMessage="Your must enter a new password."
                                                            validatorMessage="New passwords do not match."
                                                            validator="#{userMB.validateNewPass}"
                                                            id="newPassword2"/>
                                                <p:message id="msgPassword2" for="newPassword2"/>

                                                <p:commandButton value="Change Password" action="#{userMB.changePwd}" update="@form" id="cmdBtn" styleClass="btn-primary"/>

                                            </p:panelGrid>
                                        </h:form>
                                    </p:panel>


                                </div>
                            </div>
                            <!-- /.box -->
                        </div>
                        <!-- /.col -->
                    </div>
                    <!-- /.row -->
                </section>
                <!-- /.content -->
            </div>                     


        </ui:define>

</ui:composition> 
